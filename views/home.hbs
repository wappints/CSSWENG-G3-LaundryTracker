<!DOCTYPE html>
<html>
   <head>
      <meta charset = "UTF-8">
      <title>Home</title>
          <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="public/js/dropdown.js"></script>
             <link rel="stylesheet" href="public/css/nav.css">
              <link rel="stylesheet" href="public/css/styles.css">
                      <link rel="stylesheet" href="public/css/home.css">
        <link rel ="stylesheet"  href="./bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">

   
     
   <body>      
     {{> header}}


      </div>
   </div>
   </nav>
         
         <!-- Cart -->
      <div class="container-fluid">
      <div class="row">
        <!-- Page Header -->

        <div class="col-md-1 mt-3">
          <button class="btn btn-primary" data-toggle="modal" data-target="#salesBtn">Add Sales</button>
        </div>

        <div class='col-md-1 mt-3'>
          <button class='btn btn-primary' data-toggle="modal" data-target="#editPrice">Edit Price</button>
        </div>

        <div class="col-md-9">
          <h3 class="text-center mt-3 mb-3 col-10"><a class="btn btn-outline-primary"><i class="bi bi-caret-left-fill"></i></a></i> {{DDate}} <a class="btn btn-outline-primary"><i class="bi bi-caret-right-fill"></i></a> </h3>
        </div>

        <div class="col-md-1 mt-3 editsales">
          Edit Sales:
          <label class="switch">
            <input type="checkbox">
            <span class="slider round"></span>
          </label>
        </div>

        <!--model for editPrice-->

        <div class="modal fade" id="editPrice" tabindex="-1" role="dialog" aria-labelledby="salesModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Price</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              
              <div class="modal-body">
                <div class="container-fluid">

                  


                  <div class="row">
                    <div class="col-md-4 ml-auto" >Thin Wash</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" value="{{object.TNWPrice}}">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Thin Dry</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" value="{{object.TNDPrice}}">
                    </div>
                  </div>

                  <div class="row  mt-2">
                    <div class="col-md-4 ml-auto" >Thick Wash</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" value="{{object.TKWPrice}}">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Thick Dry</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" value="{{object.TKDPrice}}">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Fold</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" value="{{object.FOLDPrice}}">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Soap</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" value="{{object.SOAPPrice}}">
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Downy</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" value="{{object.DOWNPrice}}">
                    </div>
                  </div>

                  <div class="row mt-2">
                   

                    <button class="col-3 text-right btn btn-danger ml-4" data-dismiss="modal">Cancel</button>
                    <div class="col-1"></div>
                    <button class="col-3 text-right btn btn-success" data-dismiss="modal">Confirm</button>
                  </div>


                  </div>
                </div>
              </div>


              


            </div>
          </div>
        </div>

        


        <!--modal for Add Sales-->
        <div hidden> 
        <div  id="TNWPrice"  > {{object.TNWPrice}}</div>
        <div  id="TNDPrice"  >{{object.TNDPrice}}</div>
        <div  id="TKWPrice"  >{{object.TKWPrice}}</div>
        <div  id="TKDPrice"  >{{object.TKDPrice}}</div>
        <div  id="FOLDPrice" >{{object.FOLDPrice}}</div>
        <div  id="SOAPPrice" >{{object.SOAPPrice}}</div>
        <div  id="DOWNPrice" >{{object.DOWNPrice}}</div>
          
        </div>

        <div class="modal fade" id="salesBtn" tabindex="-1" role="dialog" aria-labelledby="salesModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Sales</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              
              <div class="modal-body">
                <div class="container-fluid" id="ADDSalesID">
                  <form method="post" action="/home/{{ACCType}}" id="addSaleForm">
                  <div class="row">
                    <div class="col-md-4">

                      <p>Name</p>

                    </div>

                    <div class="col-md-8 ml-auto">
                      <input type="text" id="ADDName" name="ADDName">

                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-4 ml-auto" >Phone</div>
                    <div class="col-md-8 ml-auto">
                      <input type="text" id="ADDPhone" name="ADDPhone">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto" >Thin Wash</div>
                    <div class="col-md-8 ml-auto">
                      <input class="ADDSALES_INPUTidentifier" type="tel" size="4" id="ADDThinW" name="ADDThinW" value="0">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Thin Dry</div>
                    <div class="col-md-8 ml-auto">
                      <input class="ADDSALES_INPUTidentifier"type="tel" size="4" id="ADDThinD" name="ADDThinD"  value="0">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Thick Wash</div>
                    <div class="col-md-8 ml-auto">
                      <input class="ADDSALES_INPUTidentifier" type="tel" size="4" id="ADDThickW"  name="ADDThickW" value="0">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Thin Dry</div>
                    <div class="col-md-8 ml-auto">
                      <input class="ADDSALES_INPUTidentifier"  type="tel" size="4" id="ADDThickD" name="ADDThickD" value="0">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto"  >Fold</div>
                    <div class="col-md-8 ml-auto">
                      <input class="ADDSALES_INPUTidentifier" type="tel" size="4" id="ADDFold" name="ADDFold" value="0">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto" >Soap</div>
                    <div class="col-md-8 ml-auto">
                      <input class="ADDSALES_INPUTidentifier"  type="tel" size="4" id="ADDSoap" name="ADDSoap" value="0">
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Downy</div>
                    <div class="col-md-8 ml-auto">
                      <input class="ADDSALES_INPUTidentifier" type="tel" size="4" id="ADDDowny" name="ADDDowny" value="0">
                    </div>
                  </div>

                  

                  <div class="row mt-3">
                    <div class="col-md ml-auto" text="text-left" id="ADDTotalPrice" name="ADDTotalPrice">Total Price: </div>
                    <input  type="number" size="4" id="ADDTotalPriceR" name="ADDTotalPriceR" value="0" readonly>
                  </div>

                  <div class="row mt-2">
                    <div class="col-md-4 ml-auto">Amount Paid: </div>
                    <div class="col-md-8 ml-auto">
                      <input type="tel" size="4"  id="ADDAmountPaid" name="ADDAmountPaid">
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md ml-auto" id="ADDBalance">Balance: </div>
                    <input  type="number" size="4" id="ADDBalanceR" name="ADDBalanceR" value="0" readonly>
                  </div>
                  <script>
                    window.onload = function(){
                      var jaba = parseInt($("#TNWPrice").text())
                      console.log(jaba)
                    }
                    $(".ADDSALES_INPUTidentifier ").on("change paste keyup cut select", function() {
                      console.log("OUCH")
                      var TNWPrice = parseInt($("#TNWPrice").text())
                      var TNDPrice =parseInt($("#TNDPrice").text())
                      var TKWPrice =parseInt($("#TKWPrice").text())
                      var TKDPrice =parseInt($("#TKDPrice").text())
                      var FOLDPrice =parseInt($("#FOLDPrice").text())
                      var SOAPPrice =parseInt($("#SOAPPrice").text())
                      var DOWNPrice =parseInt($("#DOWNPrice").text())
                      var TNWQty = parseInt($("#ADDThinW").val())
                      var TNDQty = parseInt($("#ADDThinD").val())
                      var TKWQty = parseInt($("#ADDThickW").val())
                      var TKDQty = parseInt($("#ADDThickW").val())
                      var FOLDQty = parseInt($("#ADDFold").val())
                      var SOAPQty = parseInt($("#ADDSoap").val())
                      var DOWNQty = parseInt($("#ADDDowny").val())
                      /*
                     console.log(TNWPrice)
                     console.log(TNDPrice)
                     console.log(TKWPrice)
                     console.log(TKDPrice)
                     console.log(FOLDPrice)
                     console.log(SOAPPrice)
                     console.log(DOWNPrice)
                     console.log(TNWQty)
                     console.log(TNDQty )
                     console.log(TKDQty)
                     console.log(TKWQty)
                     console.log(FOLDQty)
                     console.log(DOWNQty)
                      console.log(SOAPQty)
                      */
                      var computation = TNWPrice * TNWQty + TNDPrice * TNDQty +  TKWPrice * TKWQty +  TKDPrice * TKDQty +  FOLDPrice * FOLDQty + SOAPPrice * SOAPQty + DOWNPrice * DOWNQty
                      
                      $("#ADDTotalPriceR").val(computation);
                    });

                    $("#ADDAmountPaid").on("change paste keyup cut select", function() {
                      $("#ADDBalanceR").val( $("#ADDTotalPriceR").val() - $("#ADDAmountPaid").val()) 
                    });

                    </script>

                  <div class="row mt-2">
                    

                    <button class="col-3 text-right btn btn-danger" data-dismiss="modal">Cancel</button>
                    <div class="col-1"></div>
                    <button class="col-3 text-right btn btn-success ml-2" form="addSaleForm" target="_self">Confirm</button>
                  </div>
                  </form>

                  </div>
                </div>
              </div>


              


            </div>
          </div>
        </div>

        <!-- Table Cart -->
        <!-- Header -->
        <div class="col-md-12">
          <table class="table text-center table-striped">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Name</th>
                <th scope="col">Thin Wash</th>
                <th scope="col">Thin Dry</th>
                <th scope="col">Thick Wash</th>
                <th scope="col">Thick Dry</th>
                <th scope="col">Fold</th>
                <th scope="col">Soap</th>
                <th scope="col">Downy</th>
                <th scope="col">Total Price</th>
                <th scope="col">Amount Paid</th>
                <th scope="col">Balance</th>
                <th scope="col">Token Error</th>
                <th scope="col">Phone Number</th>
              </tr>
            </thead>

            <!-- Table Body -->
            <tbody>
              {{#each this.entry}}
                <div id="Entry_id" hidden> {{this.SalesID}} </div>
                <td ><input  id ="NAMEField" class="text-center" size="35" value="{{this.Name}}"readonly>  </td>
                <td ><input  id ="TNWField"class="text-center" size="2" value="{{this.ThinWash}}" readonly>  </td>
                <td ><input  id ="TNDField"class="text-center" size="2" value="{{this.ThinDry}}" readonly>  </td>
                <td ><input  id ="TKWField"class="text-center" size="2" value="{{this.ThickWash}}" readonly>  </td>
                <td ><input  id ="TKDField" class="text-center" size="2" value="{{this.ThickDry}}" readonly>  </td>
                <td ><input  id ="FOLDField" class="text-center" size="2" value="{{this.Fold}}" readonly>  </td>
                <td ><input  id ="SOAPField" class="text-center" size="2" value="{{this.Soap}}" readonly>  </td>
                <td ><input  id ="DOWNField" class="text-center" size="2" value="{{this.Downy}}" readonly> </td>
                <td id ="TTLField" width="100" value="{{this.totalPrice}}"></td>
                <td id ="AMTField" width="100" value="{{this.AmountPaid}}"></td>
                <td id ="BALField" width="100" value="{{this.Balance}}"></td>
                <td>
                  <input id ="TOKENField" class="text-center" size="2" value ="{{this.Token}}" readonly> 
                </td>
                <td ><input id ="PHONEField" class="text-center" size="11" value="{{this.PhoneNumber}}" readonly></td>

                <td><a class="btn btn-outline-danger "><i class="bi bi-trash" href="DeleteAccountModal" data-toggle="modal" data-target="#DeleteAccountModal"></i></a></td>

              </tr>
              {{/each}}
            </tbody>
            <tr>
              <td>Total: </td>
              <td>{{TNWSum}}</td>
              <td >{{TNDSum}}</td>
              <td>{{TKWSum}}</td>
              <td>{{TKDSum}}</td>
              <td>{{FOLDSum}}</td>
              <td>{{SOAPSum}}</td>
              <td>{{DOWNSum}}</td>
              <td>{{TTLSum}}</td>
              <td>{{AMTSum}}</td>
              <td>{{BALSum}}</td>
              <td>{{TOKENSum}}</td>
            </tr>
            <!-- End of Table Body -->

          </table>
          <!-- End of Table -->
        </div>

        </div>



         <!-- JQuery -->
 <script
 src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
 integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
 crossorigin="anonymous"
></script>
<!-- Popper -->
<script
 src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
 integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
 crossorigin="anonymous"
></script>
<!-- Bootstrap -->
<script
 src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
 integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
 crossorigin="anonymous"
></script>
   </body>
</html>